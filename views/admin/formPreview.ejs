<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Inbound PMS</title>
    <meta content='width=device-width, initial-scale=1.0, shrink-to-fit=no' name='viewport' />
    <link rel="icon" href="/assets/img/icon.ico" type="image/x-icon" />

    <!-- CSS Files -->
    <link rel="stylesheet" href="/assets/css/bootstrap.css">
    <link rel="stylesheet" href="/assets/css/atlantis.min.css">

    <!-- CSS Just for demo purpose, don't include it in your project -->
    <link rel="stylesheet" href="/assets/css/demo.css">
    <link rel="stylesheet" href="/assets/css/kk_style.css">
    <link rel="stylesheet" href="/assets/css/iziToast.min.css">

    <script src="/assets/js/plugin/webfont/webfont.min.js"></script>
    <script>
        WebFont.load({
            google: { "families": ["Lato:300,400,700,900"] },
            custom: { "families": ["Flaticon", "Font Awesome 5 Solid", "Font Awesome 5 Regular", "Font Awesome 5 Brands", "simple-line-icons"], urls: ['/assets/css/fonts.min.css'] },
            active: function () {
                sessionStorage.fonts = true;
            }
        });
    </script>


</head>

<body>
    <div class="wrapper">
        <%-include('../partials/config')%>

            <!-- header -->
            <%-include('../partials/header.ejs')%>
                <!-- header end -->

                <!-- Sidebar -->
                <%-include('../partials/sidebar.ejs')%>
                    <!-- End Sidebar -->

                    <div class="main-panel kk_form_page bg-white kK_custom_form">
                        <div class="content">
                            <div class="page-inner">

                                <div class="container-fluid ">
                                    <div class="d-flex justify-content-end">
                                        <a href="/admin/customform/<%= layout.formId%>/fieldmap"
                                            class="btn btn-primary btn-round ml-auto">Edit Fieldset</a>

                                    </div>
                                    <% const inputs=['text' , 'number' , 'email' , 'tel'] %>
                                        <% layout.componets.forEach(component=>{ %>
                                            <% if(component.type=='sec' ){ %>
                                                <section class="pad-40">
                                                    <div class="level_1_header">
                                                        <%=component.name %>
                                                    </div>
                                                    <% if(component.subComponents.length==0){ %>
                                                        <div class="mx-auto Kk_no_assigned">
                                                            <img class="img-responsive"
                                                                src="/assets/img/no_field_assigned.png">
                                                            <h4>No Component Created
                                                            </h4>
                                                            <h6>Please Create some components</h6>
                                                        </div>
                                                        <% } %>
                                                            <% component.subComponents.forEach(subComponent=>{ %>

                                                                <% if(subComponent.type=='sec' ){ %>
                                                                    <section class="pad-40">
                                                                        <div class="level_2_header">
                                                                            <%= subComponent.name %>
                                                                        </div>
                                                                        <div class="row m-3">
                                                                            <% if(subComponent.AssignedFields.length==0){
                                                                                %>
                                                                                
                                                                                <div class="mx-auto Kk_no_assigned">
                                                                                    <img class="img-responsive"
                                                                                        src="/assets/img/no_field_assigned.png">
                                                                                    <h4>No Fields Assigned
                                                                                    </h4>
                                                                                    <h6>Please assign some fields</h6>
                                                                                </div>
                                                                                <% }else{ %>
                                                                                    <%if(subComponent.AssignedTable !==undefined){%>
                                                                                        <%= JSON.stringify(subComponent.table)%>
                                                                                           <i id="addRow" class="fas fa-plus-circle kk_preview_add_row"></i>
                                                                                         
                                                                                        <table id="mt" class="table">
                                                                                            <thead>
                                                                                                <tr>
                                                                                                    <% JSON.parse(subComponent.table.fields).forEach(row=>{ %>
                                                                                                        <th scope="col"><%= row.name%></th>
                                                                                                        
                                                                                                     <% }) %>
                                                                                   
                                                                                                </tr>
                                                                                            
                                                                                            </thead>
                                                                                        
                                                                                            <tbody>
                                                                                            <tr>
                                                                                                <td>
                                                                                                    <div class="form-group">
                                                                                                        <select class="form-control">
                                                                                                            <option>select one from this list</option>
                                                                                                            <%subComponent.table.values.forEach(a=>{ %>
                                                                                                            <option value="<%=a.id%>"><%=a.label%></option>
                                                                                                           <% })%>
                                                                                                            
                                                                                                        </select>
                                                                                                    </div>
                                                                                                </td>
                                                                                                <td>
                                                                                                    <div class="form-group">
                                                                                                        <input type="text" class="form-control form-control" id="defaultInput" placeholder="Default Input">
                                                                                                    </div>
                                                                                                </td>
                                                                                                <td>
                                                                                                    <div class="form-group">
                                                                                                        <input type="text" class="form-control form-control" id="defaultInput" placeholder="Default Input">
                                                                                                    </div>
                                                                                                </td>
                                                                                                <td>
                                                                                                    <div class="form-group">
                                                                                                        <input type="text" class="form-control form-control" id="defaultInput" placeholder="Default Input">
                                                                                                    </div>
                                                                                                </td>
                                                                                                <td>
                                                                                                    <div class="form-group">
                                                                                                        <input type="text" class="form-control form-control" id="defaultInput" placeholder="Default Input">
                                                                                                    </div>
                                                                                                </td>
                                                                                                <td><i class="fas fa-trash-alt"></i></td>
                                                                                            </tr>
                                                                                            </tbody>
                                                                                        </table>
                                                                                        <%}%>
                                                                                    <%subComponent.AssignedFields.forEach(_a=> {%>
                                                                            
                                                                                        <% if(_a.field.inputType=='checkbox'){ %>
                                                                                            <div class="col-md-3 mb-3">
                                                                                                <div class="form-check">
                                                                                                    <label
                                                                                                        class="form-check-label">
                                                                                                        <input
                                                                                                            class="form-check-input"
                                                                                                            type="checkbox"
                                                                                                            value="">
                                                                                                        <span
                                                                                                            class="form-check-sign">
                                                                                                            <%= _a.field.label
                                                                                                                %>
                                                                                                        </span>
                                                                                                    </label>
                                                                                                </div>
                                                                                            </div>
                                                                                            <% } %>
                                                                                                <% if(_a.field.inputType=='list/record'
                                                                                                    ){ %>
                                                                                                    <div
                                                                                                        class="col-md-3">
                                                                                                        <div
                                                                                                            class="form-group">
                                                                                                            <label
                                                                                                                for="smallSelect"
                                                                                                                style="width: 100%">
                                                                                                                <%=
                                                                                                                    _a.field.label%>
                                                                                                            </label>
                                                                                                            <select
                                                                                                                name="<%= _a.field.id%>"
                                                                                                                class="form-control form-control-sm"
                                                                                                                id="smallSelect">
                                                                                                                <option>
                                                                                                                </option>
                                                                                                                <% if(_a.field.list
                                                                                                                    !=null){
                                                                                                                    %>
                                                                                                                    <% if(_a.field.list
                                                                                                                        !=null)
                                                                                                                        {
                                                                                                                        _a.field.list.split('----').forEach(b=>
                                                                                                                        {%>
                                                                                                                        <option
                                                                                                                            value=<%=b
                                                                                                                            %>
                                                                                                                            >
                                                                                                                            <%= b
                                                                                                                                %>
                                                                                                                        </option>
                                                                                                                        <%})}}%>

                                                                                                            </select>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <%}%>
                                                                                                        <% if(inputs.includes(_a.field.inputType)){
                                                                                                            %>
                                                                                                            
                                                                                                                <div
                                                                                                                    class="col-md-3 mb-3">
                                                                                                                    <div
                                                                                                                        class="form-group">
                                                                                                                        <label
                                                                                                                            for="email2">
                                                                                                                            <%= _a.field.label
                                                                                                                                %>
                                                                                                                        </label>
                                                                                                                        <input
                                                                                                                            type="<%=_a.field.inputType %>"
                                                                                                                            class="form-control"
                                                                                                                            id="email2">
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                                <% } %>
                                                                                                            <%if(_a.field.inputType == 'inline html'){%>
                                                                                                                <div class="col-md-6 mb-3">
                                                                                                                    <div class="form-group">
                                                                                                                        <label style="font-size: 14px !important; font-weight: 500" for="email2"></label>
                                                                                                                            <%= _a.field.label                                                                                                                              %>
                                                                                                                        </label>
                                                                                                                        <div id="editor"></div>
                                                                                                                    </div>
                                                                                                               </div>
                                                                                                            <%}%>
                                                                                                        <%})}  %>
                                                                        </div>
                                                                    </section>
                                                                    <% }else{ %>
                                                                        <section class="pad-40">
                                                                            <div class="level_2_header">
                                                                                <%= subComponent.name %>
                                                                            </div>
                                                                            <div class="card-body">
                                                                                <ul class="nav nav-pills nav-secondary"
                                                                                    id="pills-tab" role="tablist">
                                                                                    <%
                                                                                        subComponent.tabComponents.forEach(tab=>
                                                                                        { %>
                                                                                        <li class="nav-item submenu">
                                                                                            <a class="nav-link"
                                                                                                id="pills-home-tab"
                                                                                                data-toggle="pill"
                                                                                                href="#pills-<%=tab.name %>"
                                                                                                role="tab"
                                                                                                aria-controls="pills-home"
                                                                                                aria-selected="false">
                                                                                                <%=tab.name %>
                                                                                            </a>
                                                                                        </li>
                                                                                        <%}) %>
                                                                                </ul>
                                                                                <div class="tab-content mt-2 mb-3"
                                                                                    id="pills-tabContent">
                                                                                    <%
                                                                                        subComponent.tabComponents.forEach(tab=>
                                                                                        { %>
                                                                                        <div class="tab-pane fade"
                                                                                            id="pills-<%=tab.name %>"
                                                                                            role="tabpanel"
                                                                                            aria-labelledby="pills-home-tab">
                                                                                            <% if(tab.pageContent.length==0){
                                                                                                %>
                                                                                                <div
                                                                                                    class="mx-auto Kk_no_assigned">
                                                                                                    <img class="img-responsive"
                                                                                                        src="/assets/img/no_field_assigned.png">
                                                                                                    <h4>No Component
                                                                                                        Created
                                                                                                    </h4>
                                                                                                    <h6>Please Create
                                                                                                        some components
                                                                                                    </h6>
                                                                                                </div>
                                                                                                <% } %>
                                                                                                    <%
                                                                                                        tab.pageContent.forEach(page=>
                                                                                                        { %>

                                                                                                        <section
                                                                                                            class="pad-40">
                                                                                                            <div
                                                                                                                class="level_2_header">
                                                                                                                <%= page.name
                                                                                                                    %>
                                                                                                            </div>
                                                                                                            <div
                                                                                                                class="row m-3">
                                                                                                                <%if(page.AssignedTable !== undefined){%>
                                                                                                                    <table class="table ">
                                                                                                                        <thead>
                                                                                                                            <tr>
                                                                                                                            <% JSON.parse(page.table.fields).forEach(row=>{ %>
                                                                                                                                <th scope="col">
                                                                                                                                    <%= row.name%>
                                                                                                                                </th>
                                                                                                                                <% }) %>
                                                                                                                            
                                                                                                                            </tr>
                                                                                                                        </thead>
                                                                                                                        <tbody>  
                                                                                                                            
                                                                                                                        </tbody>
                                                                                                                    </table>
                                                                                                                <%}else{%>
                                                                                                                <% if(page.AssignedFields.length==0){ %>
                                                                                                                    <div class="mx-auto Kk_no_assigned">
                                                                                                                        <img class="img-responsive"
                                                                                                                            src="/assets/img/no_field_assigned.png">
                                                                                                                        <h4>No  Fields Assigned </h4>
                                                                                                                        <h6>Please assign  some   fields
                                                                                                                        </h6>
                                                                                                                    </div>
                                                                                                                    <% }else{  %>
                                                                                                                        <% page.AssignedFields.forEach(_a=>{%>
                                                                                                                            <% if(_a.field.inputType=='checkbox' ){ %>

                                                                                                                                <div
                                                                                                                                    class="col-md-3 mb-3">
                                                                                                                                    <div
                                                                                                                                        class="form-check">
                                                                                                                                        <label
                                                                                                                                            class="form-check-label">
                                                                                                                                            <input
                                                                                                                                                class="form-check-input"
                                                                                                                                                type="checkbox"
                                                                                                                                                value="">
                                                                                                                                            <span
                                                                                                                                                class="form-check-sign">
                                                                                                                                                <%= _a.field.label
                                                                                                                                                    %>
                                                                                                                                            </span>
                                                                                                                                        </label>
                                                                                                                                    </div>
                                                                                                                                </div>
                                                                                                                                <% }
                                                                                                                                    %>
                                                                                                                                    <% if(_a.field.inputType=='list/record'
                                                                                                                                        ){
                                                                                                                                        %>
                                                                                                                                        <div
                                                                                                                                            class="col-md-3">
                                                                                                                                            <div
                                                                                                                                                class="form-group">
                                                                                                                                                <label
                                                                                                                                                    for="smallSelect"
                                                                                                                                                    style="width: 100%">
                                                                                                                                                    <%=
                                                                                                                                                        _a.field.label%>
                                                                                                                                                </label>
                                                                                                                                                <select
                                                                                                                                                    name="<%= _a.field.id%>"
                                                                                                                                                    class="form-control form-control-sm"
                                                                                                                                                    id="smallSelect">
                                                                                                                                                    <option>
                                                                                                                                                    </option>
                                                                                                                                                    <% if(_a.field.list
                                                                                                                                                        !=null){
                                                                                                                                                        %>
                                                                                                                                                        <% if(_a.field.list
                                                                                                                                                            !=null)
                                                                                                                                                            {
                                                                                                                                                            _a.field.list.split('----').forEach(b=>
                                                                                                                                                            {%>
                                                                                                                                                            <option
                                                                                                                                                                value=<%=b
                                                                                                                                                                %>
                                                                                                                                                                >
                                                                                                                                                                <%= b
                                                                                                                                                                    %>
                                                                                                                                                            </option>
                                                                                                                                                            <%})}}%>

                                                                                                                                                </select>
                                                                                                                                            </div>
                                                                                                                                        </div>
                                                                                                                                        <%}%>
                                                                                                                                            <% if(inputs.includes(_a.field.inputType)){
                                                                                                                                                %>
                                                                                                                                                <div
                                                                                                                                                    class="col-md-3 mb-3">
                                                                                                                                                    <div
                                                                                                                                                        class="form-group">
                                                                                                                                                        <label
                                                                                                                                                            for="email2">
                                                                                                                                                            <%= _a.field.label
                                                                                                                                                                %>
                                                                                                                                                        </label>
                                                                                                                                                        <input
                                                                                                                                                            type="<%=_a.field.inputType %>"
                                                                                                                                                            class="form-control"
                                                                                                                                                            id="email2">
                                                                                                                                                    </div>
                                                                                                                                                </div>
                                                                                                                                                <% }
                                                                                                                                                    %>
                                                                                                                                                    <%})%>
                                                                                                                     <%}}%>
                                                                                                            </div>
                                                                                                        </section>
                                                                                                        <% }) %>
                                                                                        </div>
                                                                                        <%}) %>

                                                                                </div>
                                                                            </div>
                                                                        </section>
                                                                        <% } %>
                                                                            <%}) %>
                                                </section>
                                                <% } %>
                                                    <% if(component.type=='tab' ){ %>
                                                        <section class="pad-40">
                                                            <div class="level_1_header">
                                                                <%=component.name %>
                                                            </div>
                                                            <div class="card-body">
                                                                <ul class="nav nav-pills nav-secondary" id="pills-tab"
                                                                    role="tablist">
                                                                    <% component.subComponents.forEach(tab=>{ %>
                                                                        <li class="nav-item submenu">
                                                                            <a class="nav-link" id="pills-home-tab"
                                                                                data-toggle="pill"
                                                                                href="#pills-<%=tab.name %>" role="tab"
                                                                                aria-controls="pills-home"
                                                                                aria-selected="false">
                                                                                <%=tab.name %>
                                                                            </a>
                                                                        </li>
                                                                        <%}) %>
                                                                </ul>
                                                                <div class="tab-content mt-2 mb-3"
                                                                    id="pills-tabContent">

                                                                    <% component.subComponents.forEach(subComponent=>{
                                                                        %>
                                                                        <div class="tab-pane fade"
                                                                            id="pills-<%=subComponent.name %>"
                                                                            role="tabpanel"
                                                                            aria-labelledby="pills-home-tab">

                                                                            <%
                                                                                subComponent.tabComponents.forEach(tabComponent=>
                                                                                { %>

                                                                                <section class="pad-40">
                                                                                    <div class="level_2_header">
                                                                                        <%= tabComponent.name %>
                                                                                    </div>

                                                                                    <div class="row m-3">
                                                                                        <% if(tabComponent.AssignedFields.length==0){
                                                                                            %>
                                                                                            <div
                                                                                                class="mx-auto Kk_no_assigned">
                                                                                                <img class="img-responsive"
                                                                                                    src="/assets/img/no_field_assigned.png">
                                                                                                <h4>No Fields Assigned
                                                                                                </h4>
                                                                                                <h6>Please assign some
                                                                                                    fields</h6>
                                                                                            </div>
                                                                                            <% }else{ %>
                                                                                                <%
                                                                                                    tabComponent.AssignedFields.forEach(_a=>
                                                                                                    {%>

                                                                                                    <% if(_a.field.inputType=='checkbox'
                                                                                                        ){ %>
                                                                                                        <div
                                                                                                            class="col-md-3 mb-3">
                                                                                                            <div
                                                                                                                class="form-check">
                                                                                                                <label
                                                                                                                    class="form-check-label">
                                                                                                                    <input
                                                                                                                        class="form-check-input"
                                                                                                                        type="checkbox"
                                                                                                                        value="">
                                                                                                                    <span
                                                                                                                        class="form-check-sign">
                                                                                                                        <%= _a.field.label
                                                                                                                            %>
                                                                                                                    </span>
                                                                                                                </label>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                        <% } %>
                                                                                                            <% if(_a.field.inputType=='list/record'
                                                                                                                ){ %>
                                                                                                                <div
                                                                                                                    class="col-md-3">
                                                                                                                    <div
                                                                                                                        class="form-group">
                                                                                                                        <label
                                                                                                                            for="smallSelect"
                                                                                                                            style="width: 100%">
                                                                                                                            <%=
                                                                                                                                _a.field.label%>
                                                                                                                        </label>
                                                                                                                        <select
                                                                                                                            name="<%= _a.field.id%>"
                                                                                                                            class="form-control form-control-sm"
                                                                                                                            id="smallSelect">
                                                                                                                            <option>
                                                                                                                            </option>
                                                                                                                            <% if(_a.field.list
                                                                                                                                !=null){
                                                                                                                                %>
                                                                                                                                <% if(_a.field.list
                                                                                                                                    !=null)
                                                                                                                                    {
                                                                                                                                    _a.field.list.split('----').forEach(b=>
                                                                                                                                    {%>
                                                                                                                                    <option
                                                                                                                                        value=<%=b
                                                                                                                                        %>
                                                                                                                                        >
                                                                                                                                        <%= b
                                                                                                                                            %>
                                                                                                                                    </option>
                                                                                                                                    <%})}}%>

                                                                                                                        </select>
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                                <%}%>
                                                                                                                    <% if(inputs.includes(_a.field.inputType)){
                                                                                                                        %>
                                                                                                                        <div
                                                                                                                            class="col-md-3 mb-3">
                                                                                                                            <div
                                                                                                                                class="form-group">
                                                                                                                                <label
                                                                                                                                    for="email2">
                                                                                                                                    <%= _a.field.label
                                                                                                                                        %>
                                                                                                                                </label>
                                                                                                                                <input
                                                                                                                                    type="<%=_a.field.inputType %>"
                                                                                                                                    class="form-control"
                                                                                                                                    id="email2">
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                        <% }
                                                                                                                            %>
                                                                                                                            <%})%>
                                                                                                                                <%}%>
                                                                                    </div>
                                                                                </section>
                                                                                <% }) %>
                                                                        </div>
                                                                        <%}) %>
                                                                </div>
                                                            </div>
                                                        </section>
                                                        <% } %>
                                                            <% }) %>
                                </div>
                            </div>


                        </div>
                        <%-include('../partials/footer.ejs')%>
                    </div>

    </div>
    <!--   Core JS Files   -->

    <!-- jQuery library -->
    <script src="/assets/js/core/jquery.3.2.1.min.js"></script>
    <!-- Latest compiled JavaScript -->
    <script src="/assets/js/core/bootstrap.js"></script>
    <!-- Popper JS -->
    <script src="/assets/js/core/popper.min.js"></script>
    <!-- Atlantis JS -->
    <script src="/assets/js/atlantis.min.js"></script>
    <script src="/assets/js/iziToast.js"></script>
    <script src="/assets/js/flashMessage.js"></script>
    <!-- jQuery UI -->
    <script src="/assets/js/plugin/jquery-ui-1.12.1.custom/jquery-ui.min.js"></script>
    <script src="/assets/js/plugin/jquery-ui-touch-punch/jquery.ui.touch-punch.min.js"></script>
    <script src="/assets/js/plugin/datatables/datatables.min.js"></script>

    <!-- jQuery Scrollbar -->
    <script src="/assets/js/plugin/jquery-scrollbar/jquery.scrollbar.min.js"></script>
    <script src="https://cdn.ckeditor.com/ckeditor5/27.0.0/classic/ckeditor.js"></script>

    <script>
        function openNav() {
            document.getElementById("mySidenav").style.width = "300px";
        }

        function closeNav() {
            document.getElementById("mySidenav").style.width = "0";
        }
    </script>
    <script>
        ClassicEditor
            .create(document.querySelector('#editor'))
            .then(editor => {
                console.log(editor);
            })
            .catch(error => {
                console.error(error);
            });
    </script>
<script type='text/javascript' src='http://code.jquery.com/jquery-1.10.1.js'></script>
    <script type='text/javascript'>//<![CDATA[ 
        $(window).load(function () {
            $(function () {
               
                $("#addRow").click(function () {
                    var row = $(`<tr><td><div class="form-group">
												<select class="form-control">
													<option>1</option>
													<option>2</option>
													<option>3</option>
													<option>4</option>
													<option>5</option>
												</select>
											</div></td>
                                            <td><div class="form-group">
											<input type="text" class="form-control form-control" id="defaultInput" placeholder="Default Input">
											</div></td>
                                            <td><div class="form-group">
												<input type="text" class="form-control form-control" id="defaultInput" placeholder="Default Input">
											</div></td>
                                            <td><div class="form-group">
												<input type="text" class="form-control form-control" id="defaultInput" placeholder="Default Input">
											</div></td>
                                            <td><div class="form-group">
												<input type="text" class="form-control form-control" id="defaultInput" placeholder="Default Input">
											</div></td>
                                            <td><i class="fas fa-trash-alt" type='button' onclick='productDelete(this);'></i>
        </td>
                                            </tr>`);
                    $("#mt > tbody").append(row);
                });
            });
        });
    </script>

 <script>
     function productDelete(ctl) {
            $(ctl).parents("tr").remove();
        }
 </script>
</body>

</html>